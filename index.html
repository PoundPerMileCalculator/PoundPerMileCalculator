<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pound Per Mile Calculator</title>
<style>
  body {
    background-color: #303036;
    font-family: 'League Spartan', sans-serif;
    color: #30BCED;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  .container {
    background-color: #fffaff;
    padding: 40px 30px;
    max-width: 750px;
    margin: 50px auto;
    border-radius: 15px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.25);
  }
  h1 {
    margin-bottom: 15px;
    font-size: 2.2rem;
  }
  .readme {
    font-size: 1.1rem;
    margin-bottom: 30px;
    line-height: 1.6;
    color: #30BCED;
  }
  nav a {
    text-decoration: none;
    color: #30BCED;
    font-weight: bold;
    margin: 0 8px;
  }
  nav a:hover {
    color: #fc5130;
  }
  .dropdowns {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
  }
  .dropdowns label {
    margin-bottom: 5px;
    font-weight: bold;
  }
  .dropdowns select, .dropdowns input {
    width: 250px;
    padding: 12px 15px;
    border-radius: 12px;
    border: 1px solid #ccc;
    background-color: #fff;
    color: #303036;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .dropdowns select:hover, .dropdowns input:hover {
    border-color: #30BCED;
    box-shadow: 0 2px 6px rgba(48, 188, 237, 0.3);
  }
  button {
    padding: 12px 25px;
    font-size: 1.1rem;
    font-weight: bold;
    background-color: #30BCED;
    color: #fff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover:not(:disabled) {
    background-color: #1fa4d6;
  }
  button:disabled {
    background-color: #999;
    cursor: not-allowed;
  }
  .result, .total-cost {
    margin-top: 25px;
    font-size: 1.5rem;
    font-weight: bold;
    color: #fc5130;
  }
  footer {
    margin-top: 40px;
    font-size: 0.9rem;
    color: #050401;
    line-height: 1.4;
  }
  @media (max-width: 500px) {
    .dropdowns select, .dropdowns input {
      width: 90%;
    }
  }
</style>
</head>
<body>
<div class="container">
  <nav>
    <a href="index.html">Home</a> |
    <a href="efficiency.html">Find Efficiency</a> |
    <a href="images.html">Vehicle Images</a>
  </nav>
  <h1>Pound Per Mile Calculator</h1>
  <p class="readme">
    Select your vehicle brand and model, then your region. The calculator will show your estimated cost per mile. Enter distance for total cost.
  </p>
  <div class="dropdowns">
    <div>
      <label for="brand">Brand:</label>
      <select id="brand">
        <option value="">--Select Brand--</option>
      </select>
    </div>
    <div>
      <label for="model">Model:</label>
      <select id="model" disabled>
        <option value="">--Select Model--</option>
      </select>
    </div>
    <div>
      <label for="area">Region:</label>
      <select id="area">
        <option value="">--Select Region--</option>
        <option value="Wales">Wales</option>
        <option value="Scotland">Scotland</option>
        <option value="North England">North England</option>
        <option value="East England">East England</option>
        <option value="South England">South England</option>
        <option value="West England">West England</option>
        <option value="London">London</option>
      </select>
    </div>
    <div>
      <label for="miles">Distance (miles, optional):</label>
      <input type="number" id="miles" placeholder="e.g. 100" min="0" step="1">
    </div>
  </div>
  <button id="calculateBtn" disabled>Calculate £/mile</button>
  <div class="result" id="result"></div>
  <div class="total-cost" id="totalCost"></div>
  <footer>
    Website is in early stages. Vehicle efficiency is recorded at peak performance; real-world may vary.<br>
    Fuel & electricity prices as of December 2025.
  </footer>
</div>

<script>
// DOM elements
const brandSelect = document.getElementById('brand');
const modelSelect = document.getElementById('model');
const areaSelect = document.getElementById('area');
const milesInput = document.getElementById('miles');
const calculateBtn = document.getElementById('calculateBtn');
const resultDiv = document.getElementById('result');
const totalDiv = document.getElementById('totalCost');

// Vehicle data (fixed duplicates and syntax errors)
const vehiclesData = {
  "Ford": [
    { model: "Fiesta", fuel: "petrol", mpg: 50 },
    { model: "Focus", fuel: "petrol", mpg: 45 },
    { model: "Kuga", fuel: "diesel", mpg: 38 },
    { model: "Puma", fuel: "hybrid", mpg: 44 },
    { model: "Mondeo", fuel: "diesel", mpg: 50 },
    { model: "Mustang", fuel: "petrol", mpg: 25 },
    { model: "Mustang Mach-E", fuel: "electric", kwh_per_mile: 0.28 }
  ],
  "Toyota": [
    { model: "Corolla", fuel: "petrol", mpg: 52 },
    { model: "Prius", fuel: "hybrid", mpg: 56 },
    { model: "Yaris", fuel: "petrol", mpg: 55 },
    { model: "RAV4", fuel: "petrol", mpg: 40 },
    { model: "C-HR", fuel: "hybrid", mpg: 53 },
    { model: "bZ4X", fuel: "electric", kwh_per_mile: 0.30 },
    { model: "Mirai", fuel: "hydrogen", mpg: 65 }
  ],
  "BMW": [
    { model: "3 Series", fuel: "petrol", mpg: 42 },
    { model: "5 Series", fuel: "diesel", mpg: 38 },
    { model: "i4", fuel: "electric", kwh_per_mile: 0.31 },
    { model: "iX", fuel: "electric", kwh_per_mile: 0.36 }
  ],
  "Tesla": [
    { model: "Model 3 Long Range", fuel: "electric", kwh_per_mile: 0.21 },
    { model: "Model Y", fuel: "electric", kwh_per_mile: 0.25 },
    { model: "Model S", fuel: "electric", kwh_per_mile: 0.27 },
    { model: "Model X", fuel: "electric", kwh_per_mile: 0.30 }
  ],
  "Volkswagen": [
    { model: "Golf", fuel: "petrol", mpg: 45 },
    { model: "ID.3", fuel: "electric", kwh_per_mile: 0.30 },
    { model: "ID.4", fuel: "electric", kwh_per_mile: 0.32 }
  ],
  "Honda": [
    { model: "Jazz", fuel: "hybrid", mpg: 60 },
    { model: "Civic", fuel: "petrol", mpg: 52 },
    { model: "HR-V", fuel: "hybrid", mpg: 52 },
    { model: "CR-V", fuel: "hybrid", mpg: 42 }
  ],
  // Add more brands as needed — full list available if you want it restored
};

// Fuel prices (pence per litre) - December 2025 estimates
const fuelPrices = {
  "Wales": { petrol: 135, diesel: 143 },
  "Scotland": { petrol: 135, diesel: 144 },
  "North England": { petrol: 136, diesel: 145 },
  "East England": { petrol: 137, diesel: 145 },
  "South England": { petrol: 138, diesel: 146 },
  "West England": { petrol: 136, diesel: 144 },
  "London": { petrol: 138, diesel: 146 }
};

// Electricity prices (pence per kWh)
const energyPrices = {
  "Wales": 25.8,
  "Scotland": 26.0,
  "North England": 25.0,
  "East England": 26.0,
  "South England": 26.9,
  "West England": 26.0,
  "London": 26.05
};

// Populate brands
Object.keys(vehiclesData).sort().forEach(brand => {
  const opt = document.createElement('option');
  opt.value = brand;
  opt.textContent = brand;
  brandSelect.appendChild(opt);
});

// Event listeners
brandSelect.addEventListener('change', updateModels);
modelSelect.addEventListener('change', checkButtonState);
areaSelect.addEventListener('change', checkButtonState);
milesInput.addEventListener('input', calculateIfReady);
calculateBtn.addEventListener('click', calculate);

function updateModels() {
  const brand = brandSelect.value;
  modelSelect.innerHTML = '<option value="">--Select Model--</option>';
  modelSelect.disabled = true;

  if (brand && vehiclesData[brand]) {
    vehiclesData[brand].forEach(vehicle => {
      const opt = document.createElement('option');
      opt.value = vehicle.model;
      opt.textContent = vehicle.model;
      modelSelect.appendChild(opt);
    });
    modelSelect.disabled = false;
  }
  checkButtonState();
}

function checkButtonState() {
  calculateBtn.disabled = !(brandSelect.value && modelSelect.value && areaSelect.value);
}

function calculateIfReady() {
  if (!calculateBtn.disabled) calculate();
}

function calculate() {
  const brand = brandSelect.value;
  const model = modelSelect.value;
  const area = areaSelect.value;
  const vehicle = vehiclesData[brand].find(v => v.model === model);

  if (!vehicle) {
    resultDiv.textContent = "Vehicle data not found.";
    return;
  }

  let costPerMile = 0;

  if (vehicle.fuel === "petrol" || vehicle.fuel === "hybrid") {
    const pricePerLitre = fuelPrices[area].petrol / 100;
    const litresPerMile = 4.54609 / vehicle.mpg;
    costPerMile = pricePerLitre * litresPerMile;
  } else if (vehicle.fuel === "diesel") {
    const pricePerLitre = fuelPrices[area].diesel / 100;
    const litresPerMile = 4.54609 / vehicle.mpg;
    costPerMile = pricePerLitre * litresPerMile;
  } else if (vehicle.fuel === "electric") {
    const pricePerKWh = energyPrices[area] / 100;
    costPerMile = vehicle.kwh_per_mile * pricePerKWh;
  } else if (vehicle.fuel === "hydrogen") {
    resultDiv.textContent = `${brand} ${model}: Hydrogen pricing not available.`;
    totalDiv.textContent = "";
    return;
  }

  resultDiv.textContent = `Estimated cost: £${costPerMile.toFixed(3)} per mile (${brand} ${model} in ${area})`;

  const miles = parseFloat(milesInput.value);
  if (!isNaN(miles) && miles > 0) {
    const total = costPerMile * miles;
    totalDiv.textContent = `Total for ${miles} miles: £${total.toFixed(2)}`;
  } else {
    totalDiv.textContent = "";
  }
}
</script>
</body>
</html>
