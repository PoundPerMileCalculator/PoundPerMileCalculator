<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pound Per Mile Calculator</title>
<style>
  body {
    background-color: #303036;
    font-family: 'League Spartan', sans-serif;
    color: #30BCED;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  .container {
    background-color: #fffaff;
    padding: 40px 30px;
    max-width: 750px;
    margin: 50px auto;
    border-radius: 15px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.25);
  }
  h1 {
    margin-bottom: 15px;
    font-size: 2.2rem;
  }
  .readme {
    font-size: 1.1rem;
    margin-bottom: 30px;
    line-height: 1.6;
    color: #30BCED;
  }
  nav a {
    text-decoration: none;
    color: #30BCED;
    font-weight: bold;
    margin: 0 8px;
  }
  nav a:hover {
    color: #fc5130;
  }
  .dropdowns {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
  }
  .dropdowns label {
    margin-bottom: 5px;
    font-weight: bold;
  }
  .dropdowns select, .dropdowns input {
    width: 250px;
    padding: 12px 15px;
    border-radius: 12px;
    border: 1px solid #ccc;
    background-color: #fff;
    color: #303036;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .dropdowns select:hover, .dropdowns input:hover {
    border-color: #30BCED;
    box-shadow: 0 2px 6px rgba(48, 188, 237, 0.3);
  }
  button {
    padding: 12px 25px;
    font-size: 1.1rem;
    font-weight: bold;
    background-color: #30BCED;
    color: #fff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover:not(:disabled) {
    background-color: #1fa4d6;
  }
  button:disabled {
    background-color: #999;
    cursor: not-allowed;
  }
  .result, .total-cost {
    margin-top: 25px;
    font-size: 1.5rem;
    font-weight: bold;
    color: #fc5130;
  }
  footer {
    margin-top: 40px;
    font-size: 0.9rem;
    color: #050401;
    line-height: 1.4;
  }
  @media (max-width: 500px) {
    .dropdowns select, .dropdowns input {
      width: 90%;
    }
  }
</style>
</head>
<body>
<div class="container">
  <nav>
    <a href="index.html">Home</a> |
    <a href="efficiency.html">Find Efficiency</a> |
    <a href="images.html">Vehicle Images</a>
  </nav>
  <h1>Pound Per Mile Calculator</h1>
  <p class="readme">
    Select your vehicle brand and model, then your region. The calculator will show your estimated cost per mile. Enter distance for total cost.
  </p>
  <div class="dropdowns">
    <div>
      <label for="brand">Brand:</label>
      <select id="brand">
        <option value="">--Select Brand--</option>
      </select>
    </div>
    <div>
      <label for="model">Model:</label>
      <select id="model" disabled>
        <option value="">--Select Model--</option>
      </select>
    </div>
    <div>
      <label for="area">Region:</label>
      <select id="area">
        <option value="">--Select Region--</option>
        <option value="Wales">Wales</option>
        <option value="Scotland">Scotland</option>
        <option value="North England">North England</option>
        <option value="East England">East England</option>
        <option value="South England">South England</option>
        <option value="West England">West England</option>
        <option value="London">London</option>
      </select>
    </div>
    <div>
      <label for="miles">Distance (miles, optional):</label>
      <input type="number" id="miles" placeholder="e.g. 100" min="0" step="1">
    </div>
  </div>
  <button id="calculateBtn" disabled>Calculate £/mile</button>
  <div class="result" id="result"></div>
  <div class="total-cost" id="totalCost"></div>
  <footer>
    Website is in early stages. Vehicle efficiency is recorded at peak performance; real-world may vary.<br>
    Fuel & electricity prices as of December 2025.
  </footer>
</div>

<script>
// DOM elements
const brandSelect = document.getElementById('brand');
const modelSelect = document.getElementById('model');
const areaSelect = document.getElementById('area');
const milesInput = document.getElementById('miles');
const calculateBtn = document.getElementById('calculateBtn');
const resultDiv = document.getElementById('result');
const totalDiv = document.getElementById('totalCost');

// Fixed fuel and electricity prices (pence per litre / kWh) - December 2025 estimates
const fuelPrices = {
  "Wales":          { petrol: 135, diesel: 144, electricity: 26.0 },
  "Scotland":       { petrol: 136, diesel: 145, electricity: 26.5 },
  "North England":  { petrol: 136, diesel: 145, electricity: 26.2 },
  "East England":   { petrol: 137, diesel: 146, electricity: 26.4 },
  "South England":  { petrol: 138, diesel: 147, electricity: 26.9 },
  "West England":   { petrol: 137, diesel: 146, electricity: 26.0 },
  "London":         { petrol: 140, diesel: 149, electricity: 26.05 }
};

// Vehicle data grouped by category
const vehicleCategories = {
  "Car": [
    "Ford", "Toyota", "BMW", "Suzuki", "Mini", "Ferrari", "Aston Martin", "Alfa Romeo",
    "Maserati", "Pagani", "McLaren", "Lotus", "Peugeot", "Citroen", "Cupra", "MG",
    "BYD", "Honda", "Lexus", "Tesla", "Fiat", "Dacia", "Volkswagen", "Hyundai",
    "Kia", "Renault", "Mercedes", "Audi", "Skoda", "Seat"
  ],
  "Motorbike": [
    // Add motorbike brands here when you have data
    // Currently none in your dataset
  ],
  "Commercial Vehicle": [
    "MAN", "Maxus", "Mitsubishi" // L200 etc., could also include Ford Transit, Fiat Ducato, etc.
  ]
};

// Full vehicle data (unchanged except for grouping)
const vehiclesData = {
  "Ford": [ /* ... all your Ford models ... */ ],
  "Toyota": [ /* ... */ ],
  "BMW": [ /* ... */ ],
  "Suzuki": [ /* ... */ ],
  "Mini": [ /* ... */ ],
  "Ferrari": [ /* ... */ ],
  "Aston Martin": [ /* ... */ ],
  "Alfa Romeo": [ /* ... */ ],
  "Maserati": [ /* ... */ ],
  "Pagani": [ /* ... */ ],
  "McLaren": [ /* ... */ ],
  "Lotus": [ /* ... */ ],
  "Peugeot": [ /* ... */ ],
  "Citroen": [ /* ... */ ],
  "Cupra": [ /* ... */ ],
  "MG": [ /* ... */ ],
  "BYD": [ /* ... */ ],
  "Mitsubishi": [ /* ... */ ],
  "MAN": [ /* ... */ ],
  "Maxus": [ /* ... */ ],
  "Honda": [ /* ... */ ],
  "Lexus": [ /* ... */ ],
  "Tesla": [ /* ... */ ],
  "Fiat": [ /* ... */ ],
  "Dacia": [ /* ... */ ],
  "Volkswagen": [ /* ... */ ],
  "Hyundai": [ /* ... */ ],
  "Kia": [ /* ... */ ],
  "Renault": [ /* ... */ ],
  "Mercedes": [ /* ... */ ],
  "Audi": [ /* ... */ ],
  "Skoda": [ /* ... */ ],
  "Seat": [ /* ... */ ]
  // Note: Airliners and F1 removed as they don't fit normal use
};

// Populate brands with optgroups
function populateBrands() {
  const categories = ["Car", "Motorbike", "Commercial Vehicle"];
  categories.forEach(category => {
    const brands = vehicleCategories[category];
    if (brands.length === 0) return;

    const optgroup = document.createElement('optgroup');
    optgroup.label = category;

    brands.sort().forEach(brand => {
      if (vehiclesData[brand]) {
        const opt = document.createElement('option');
        opt.value = brand;
        opt.textContent = brand;
        optgroup.appendChild(opt);
      }
    });
    brandSelect.appendChild(optgroup);
  });
}
populateBrands();

// Event listeners
brandSelect.addEventListener('change', updateModels);
modelSelect.addEventListener('change', checkButtonState);
areaSelect.addEventListener('change', checkButtonState);
milesInput.addEventListener('input', calculateIfReady);
calculateBtn.addEventListener('click', calculate);

function updateModels() {
  const brand = brandSelect.value;
  modelSelect.innerHTML = '<option value="">--Select Model--</option>';
  modelSelect.disabled = true;

  if (brand && vehiclesData[brand]) {
    vehiclesData[brand].sort((a, b) => a.model.localeCompare(b.model)).forEach(vehicle => {
      const opt = document.createElement('option');
      opt.value = vehicle.model;
      opt.textContent = vehicle.model;
      modelSelect.appendChild(opt);
    });
    modelSelect.disabled = false;
  }
  checkButtonState();
}

function checkButtonState() {
  calculateBtn.disabled = !(brandSelect.value && modelSelect.value && areaSelect.value);
}

function calculateIfReady() {
  if (!calculateBtn.disabled) calculate();
}

function calculate() {
  const brand = brandSelect.value;
  const model = modelSelect.value;
  const area = areaSelect.value;
  const prices = fuelPrices[area];
  const vehicle = vehiclesData[brand].find(v => v.model === model);

  if (!vehicle || !prices) {
    resultDiv.textContent = "Data not available.";
    totalDiv.textContent = "";
    return;
  }

  let costPerMile = 0;

  if (vehicle.fuel === "petrol" || vehicle.fuel === "hybrid" || vehicle.fuel === "hydrogen") {
    const pricePerLitre = prices.petrol / 100;
    const litresPerMile = 4.54609 / vehicle.mpg; // 1 UK gallon = 4.54609 litres
    costPerMile = pricePerLitre * litresPerMile;
  } else if (vehicle.fuel === "diesel") {
    const pricePerLitre = prices.diesel / 100;
    const litresPerMile = 4.54609 / vehicle.mpg;
    costPerMile = pricePerLitre * litresPerMile;
  } else if (vehicle.fuel === "electric") {
    const pricePerKWh = prices.electricity / 100;
    costPerMile = vehicle.kwh_per_mile * pricePerKWh;
  } else {
    resultDiv.textContent = `${brand} ${model}: Fuel type not supported yet.`;
    totalDiv.textContent = "";
    return;
  }

  resultDiv.textContent = `Estimated cost: £${costPerMile.toFixed(3)} per mile (${brand} ${model} in ${area})`;

  const miles = parseFloat(milesInput.value);
  if (!isNaN(miles) && miles > 0) {
    const total = costPerMile * miles;
    totalDiv.textContent = `Total for ${miles} miles: £${total.toFixed(2)}`;
  } else {
    totalDiv.textContent = "";
  }
}
</script>
</body>
</html>
