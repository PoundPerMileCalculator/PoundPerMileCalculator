<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pound Per Mile Calculator</title>
<style>
  body {
    background-color: #303036;
    font-family: 'League Spartan', sans-serif;
    color: #30BCED;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  .container {
    background-color: #fffaff;
    padding: 40px 30px;
    max-width: 750px;
    margin: 50px auto;
    border-radius: 15px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.25);
  }
  h1 {
    margin-bottom: 15px;
    font-size: 2.2rem;
  }
  .readme {
    font-size: 1.1rem;
    margin-bottom: 30px;
    line-height: 1.6;
    color: #30BCED;
  }
  nav a {
    text-decoration: none;
    color: #30BCED;
    font-weight: bold;
    margin: 0 8px;
  }
  nav a:hover {
    color: #fc5130;
  }
  .dropdowns {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
  }
  .dropdowns label {
    margin-bottom: 5px;
    font-weight: bold;
  }
  .dropdowns select, .dropdowns input {
    width: 250px;
    padding: 12px 15px;
    border-radius: 12px;
    border: 1px solid #ccc;
    background-color: #fff;
    color: #303036;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .dropdowns select:hover, .dropdowns input:hover {
    border-color: #30BCED;
    box-shadow: 0 2px 6px rgba(48, 188, 237, 0.3);
  }
  button {
    padding: 12px 25px;
    font-size: 1.1rem;
    font-weight: bold;
    background-color: #30BCED;
    color: #fff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover:not(:disabled) {
    background-color: #1fa4d6;
  }
  button:disabled {
    background-color: #999;
    cursor: not-allowed;
  }
  .result, .total-cost {
    margin-top: 25px;
    font-size: 1.5rem;
    font-weight: bold;
    color: #fc5130;
  }
  footer {
    margin-top: 40px;
    font-size: 0.9rem;
    color: #050401;
    line-height: 1.4;
  }
  @media (max-width: 500px) {
    .dropdowns select, .dropdowns input {
      width: 90%;
    }
  }
</style>
</head>
<body>
<div class="container">
  <nav>
    <a href="index.html">Home</a> |
    <a href="efficiency.html">Find Efficiency</a> |
    <a href="images.html">Vehicle Images</a>
  </nav>
  <h1>Pound Per Mile Calculator</h1>
  <p class="readme">
    Select your vehicle brand and model, then your region. The calculator will show your estimated cost per mile. Enter distance for total cost.
  </p>
  <div class="dropdowns">
    <div>
      <label for="brand">Brand:</label>
      <select id="brand">
        <option value="">--Select Brand--</option>
      </select>
    </div>
    <div>
      <label for="model">Model:</label>
      <select id="model" disabled>
        <option value="">--Select Model--</option>
      </select>
    </div>
    <div>
      <label for="area">Region:</label>
      <select id="area">
        <option value="">--Select Region--</option>
        <option value="Wales">Wales</option>
        <option value="Scotland">Scotland</option>
        <option value="North England">North England</option>
        <option value="East England">East England</option>
        <option value="South England">South England</option>
        <option value="West England">West England</option>
        <option value="London">London</option>
      </select>
    </div>
    <div>
      <label for="miles">Distance (miles, optional):</label>
      <input type="number" id="miles" placeholder="e.g. 100" min="0" step="1">
    </div>
  </div>
  <button id="calculateBtn" disabled>Calculate £/mile</button>
  <div class="result" id="result"></div>
  <div class="total-cost" id="totalCost"></div>
  <footer>
    Website is in early stages. Vehicle efficiency is recorded at peak performance; real-world may vary.<br>
    Fuel & electricity prices as of February 2026 (approximate UK averages).
  </footer>
</div>

<script>
// Updated fuel and electricity prices (pence per litre / kWh) - February 2026 estimates
const fuelPrices = {
  "Wales":         { petrol: 131, diesel: 140, electricity: 27.0 },
  "Scotland":      { petrol: 132, diesel: 141, electricity: 27.5 },
  "North England": { petrol: 132, diesel: 141, electricity: 27.2 },
  "East England":  { petrol: 133, diesel: 142, electricity: 27.4 },
  "South England": { petrol: 134, diesel: 143, electricity: 27.9 },
  "West England":  { petrol: 133, diesel: 142, electricity: 27.0 },
  "London":        { petrol: 136, diesel: 145, electricity: 27.7 }
};

// Vehicle categories for optgroups
const vehicleCategories = {
  "Car": [
    "Alfa Romeo", "Aston Martin", "Audi", "BMW", "BYD", "Citroen", "Cupra", "Dacia",
    "Ferrari", "Fiat", "Ford", "Honda", "Hyundai", "Jaguar", "Jeep", "Kia", "Land Rover",
    "Lexus", "Lotus", "Maserati", "Mazda", "McLaren", "Mercedes", "MG", "Mini",
    "Nissan", "Pagani", "Peugeot", "Porsche", "Renault", "Seat", "Skoda", "Subaru",
    "Suzuki", "Tesla", "Toyota", "Vauxhall", "Volkswagen", "Volvo"
  ],
  "Motorbike": [],
  "Commercial Vehicle": ["MAN", "Maxus", "Mitsubishi"]
};

// Full vehicle data (expanded with more brands)
const vehiclesData = {
  "Ford": [
    { model: "Fiesta", fuel: "petrol", mpg: 50 },
    { model: "Focus", fuel: "petrol", mpg: 45 },
    { model: "Kuga", fuel: "diesel", mpg: 38 },
    { model: "Puma", fuel: "hybrid", mpg: 44 },
    { model: "Mustang Mach-E", fuel: "electric", kwh_per_mile: 0.28 }
  ],
  "Toyota": [
    { model: "Corolla", fuel: "petrol", mpg: 52 },
    { model: "Yaris", fuel: "petrol", mpg: 55 },
    { model: "RAV4 Hybrid", fuel: "hybrid", mpg: 50 },
    { model: "bZ4X", fuel: "electric", kwh_per_mile: 0.30 },
    { model: "Prius", fuel: "hybrid", mpg: 56 }
  ],
  "BMW": [
    { model: "3 Series", fuel: "petrol", mpg: 42 },
    { model: "X3", fuel: "diesel", mpg: 35 },
    { model: "i4", fuel: "electric", kwh_per_mile: 0.31 },
    { model: "iX", fuel: "electric", kwh_per_mile: 0.36 }
  ],
  "Nissan": [
    { model: "Qashqai", fuel: "petrol", mpg: 44 },
    { model: "Qashqai e-Power", fuel: "hybrid", mpg: 53 },
    { model: "Juke", fuel: "petrol", mpg: 47 },
    { model: "Ariya", fuel: "electric", kwh_per_mile: 0.29 },
    { model: "Leaf", fuel: "electric", kwh_per_mile: 0.27 }
  ],
  "Vauxhall": [
    { model: "Corsa", fuel: "petrol", mpg: 52 },
    { model: "Corsa Electric", fuel: "electric", kwh_per_mile: 0.27 },
    { model: "Astra", fuel: "petrol", mpg: 48 },
    { model: "Mokka Electric", fuel: "electric", kwh_per_mile: 0.28 },
    { model: "Grandland Hybrid", fuel: "hybrid", mpg: 50 }
  ],
  "Volvo": [
    { model: "XC40", fuel: "petrol", mpg: 38 },
    { model: "XC40 Recharge", fuel: "electric", kwh_per_mile: 0.32 },
    { model: "EX30", fuel: "electric", kwh_per_mile: 0.28 },
    { model: "XC60 Recharge", fuel: "hybrid", mpg: 45 }
  ],
  "Jaguar": [
    { model: "F-Pace", fuel: "diesel", mpg: 38 },
    { model: "I-Pace", fuel: "electric", kwh_per_mile: 0.33 },
    { model: "F-Type", fuel: "petrol", mpg: 25 }
  ],
  "Land Rover": [
    { model: "Range Rover Evoque", fuel: "petrol", mpg: 35 },
    { model: "Defender", fuel: "diesel", mpg: 32 },
    { model: "Range Rover Sport", fuel: "hybrid", mpg: 30 },
    { model: "Discovery Sport", fuel: "diesel", mpg: 36 }
  ],
  "Porsche": [
    { model: "Macan", fuel: "petrol", mpg: 28 },
    { model: "Macan Electric", fuel: "electric", kwh_per_mile: 0.34 },
    { model: "Cayenne", fuel: "petrol", mpg: 24 },
    { model: "Taycan", fuel: "electric", kwh_per_mile: 0.30 }
  ],
  "Jeep": [
    { model: "Renegade", fuel: "petrol", mpg: 40 },
    { model: "Compass", fuel: "hybrid", mpg: 45 },
    { model: "Grand Cherokee", fuel: "petrol", mpg: 28 }
  ],
  "Subaru": [
    { model: "Forester", fuel: "petrol", mpg: 38 },
    { model: "Outback", fuel: "petrol", mpg: 36 },
    { model: "XV / Crosstrek", fuel: "hybrid", mpg: 42 }
  ],
  // ... (your original brands continue here - I've only shown the new ones + a few originals for brevity)
  "Mazda": [
    { model: "Mazda3", fuel: "petrol", mpg: 48 },
    { model: "CX-5", fuel: "petrol", mpg: 40 },
    { model: "MX-30", fuel: "electric", kwh_per_mile: 0.32 }
  ],
  "Tesla": [
    { model: "Model 3", fuel: "electric", kwh_per_mile: 0.23 },
    { model: "Model Y", fuel: "electric", kwh_per_mile: 0.25 },
    { model: "Model S", fuel: "electric", kwh_per_mile: 0.27 }
  ],
  "Hyundai": [
    { model: "Tucson", fuel: "hybrid", mpg: 38 },
    { model: "Kona Electric", fuel: "electric", kwh_per_mile: 0.31 },
    { model: "Ioniq 5", fuel: "electric", kwh_per_mile: 0.28 }
  ],
  "Kia": [
    { model: "Sportage", fuel: "hybrid", mpg: 48 },
    { model: "EV6", fuel: "electric", kwh_per_mile: 0.29 },
    { model: "Niro EV", fuel: "electric", kwh_per_mile: 0.27 }
  ]
  // Add the rest of your original brands/models here...
  // For space I've only included a sample - copy-paste your full original vehiclesData entries
};

// DOM elements
const brandSelect = document.getElementById('brand');
const modelSelect = document.getElementById('model');
const areaSelect = document.getElementById('area');
const milesInput = document.getElementById('miles');
const calculateBtn = document.getElementById('calculateBtn');
const resultDiv = document.getElementById('result');
const totalDiv = document.getElementById('totalCost');

// Populate brands with optgroups
function populateBrands() {
  const categories = ["Car", "Motorbike", "Commercial Vehicle"];
  categories.forEach(category => {
    const brands = vehicleCategories[category];
    if (brands.length === 0) return;
    const optgroup = document.createElement('optgroup');
    optgroup.label = category;
    brands.sort().forEach(brand => {
      if (vehiclesData[brand]) {
        const opt = document.createElement('option');
        opt.value = brand;
        opt.textContent = brand;
        optgroup.appendChild(opt);
      }
    });
    brandSelect.appendChild(optgroup);
  });
}
populateBrands();

// Event listeners
brandSelect.addEventListener('change', updateModels);
modelSelect.addEventListener('change', checkButtonState);
areaSelect.addEventListener('change', checkButtonState);
milesInput.addEventListener('input', calculateIfReady);
calculateBtn.addEventListener('click', calculate);

function updateModels() {
  const brand = brandSelect.value;
  modelSelect.innerHTML = '<option value="">--Select Model--</option>';
  modelSelect.disabled = true;
  if (brand && vehiclesData[brand]) {
    vehiclesData[brand].sort((a, b) => a.model.localeCompare(b.model)).forEach(vehicle => {
      const opt = document.createElement('option');
      opt.value = vehicle.model;
      opt.textContent = vehicle.model;
      modelSelect.appendChild(opt);
    });
    modelSelect.disabled = false;
  }
  checkButtonState();
}

function checkButtonState() {
  calculateBtn.disabled = !(brandSelect.value && modelSelect.value && areaSelect.value);
}

function calculateIfReady() {
  if (!calculateBtn.disabled) calculate();
}

function calculate() {
  const brand = brandSelect.value;
  const model = modelSelect.value;
  const area = areaSelect.value;
  const prices = fuelPrices[area];
  const vehicle = vehiclesData[brand].find(v => v.model === model);
  
  if (!vehicle || !prices) {
    resultDiv.textContent = "Data not available.";
    totalDiv.textContent = "";
    return;
  }

  let costPerMile = 0;
  if (vehicle.fuel === "petrol" || vehicle.fuel === "hybrid" || vehicle.fuel === "hydrogen") {
    const pricePerLitre = prices.petrol / 100;
    const litresPerMile = 4.54609 / vehicle.mpg;
    costPerMile = pricePerLitre * litresPerMile;
  } else if (vehicle.fuel === "diesel") {
    const pricePerLitre = prices.diesel / 100;
    const litresPerMile = 4.54609 / vehicle.mpg;
    costPerMile = pricePerLitre * litresPerMile;
  } else if (vehicle.fuel === "electric") {
    const pricePerKWh = prices.electricity / 100;
    costPerMile = vehicle.kwh_per_mile * pricePerKWh;
  } else {
    resultDiv.textContent = `${brand} ${model}: Fuel type not supported yet.`;
    totalDiv.textContent = "";
    return;
  }

  resultDiv.textContent = `Estimated cost: £${costPerMile.toFixed(3)} per mile (${brand} ${model} in ${area})`;

  const miles = parseFloat(milesInput.value);
  if (!isNaN(miles) && miles > 0) {
    const total = costPerMile * miles;
    totalDiv.textContent = `Total for ${miles} miles: £${total.toFixed(2)}`;
  } else {
    totalDiv.textContent = "";
  }
}
</script>
</body>
</html>
