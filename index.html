<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pound Per Mile Calculator</title>
  
  <!-- Google Font similar to League Spartan -->
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'League Spartan', sans-serif;
      background-color: #fffaff;
      color: #30BCED;
      text-align: center;
      margin: 0;
      padding: 40px;
    }

    h1 {
      font-size: 3em;
      margin-bottom: 30px;
    }

    select, button {
      margin: 10px 0;
      padding: 10px 15px;
      font-size: 1.1em;
      border-radius: 12px;  /* beveled edges */
      border: 2px solid #30BCED;
      outline: none;
      cursor: pointer;
      background-color: #fff;
      color: #30BCED;
      transition: all 0.3s ease;
    }

    select:hover, button:hover {
      background-color: #30BCED;
      color: #fff;
    }

    button {
      font-weight: bold;
    }

    #result {
      margin-top: 30px;
      font-size: 1.8em;
      color: #fc5130;
    }
  </style>
</head>
<body>
  <h1>Pound Per Mile Calculator</h1>

  <label for="brand">Select Brand:</label><br>
  <select id="brand"></select><br>

  <label for="model">Select Model:</label><br>
  <select id="model"></select><br>

  <label for="area">Select Area:</label><br>
  <select id="area">
    <option value="Wales">Wales</option>
    <option value="Scotland">Scotland</option>
    <option value="North England">North England</option>
    <option value="East England">East England</option>
    <option value="South England">South England</option>
    <option value="West England">West England</option>
    <option value="London">London</option>
  </select><br>

  <button id="calculateBtn">Calculate £/Mile</button>

  <div id="result"></div>

  <script>
    const fuelPrices = {
      "Wales": { petrol: 135, diesel: 143 },
      "Scotland": { petrol: 135, diesel: 144 },
      "North England": { petrol: 136, diesel: 145 },
      "East England": { petrol: 137, diesel: 145 },
      "South England": { petrol: 138, diesel: 146 },
      "West England": { petrol: 136, diesel: 144 },
      "London": { petrol: 138, diesel: 146 }
    };

    const energyPrices = {
      "Wales": 25.8,
      "Scotland": 26.0,
      "North England": 25.0,
      "East England": 26.0,
      "South England": 26.9,
      "West England": 26.0,
      "London": 26.05
    };

    let vehiclesData = {};

    fetch('vehicles.json')
      .then(response => response.json())
      .then(data => {
        vehiclesData = data;
        populateBrands();
      });

    function populateBrands() {
      const brandSelect = document.getElementById('brand');
      brandSelect.innerHTML = '<option value="">--Select Brand--</option>';
      Object.keys(vehiclesData).forEach(brand => {
        const option = document.createElement('option');
        option.value = brand;
        option.textContent = brand;
        brandSelect.appendChild(option);
      });
      brandSelect.addEventListener('change', populateModels);
    }

    function populateModels() {
      const brand = document.getElementById('brand').value;
      const modelSelect = document.getElementById('model');
      modelSelect.innerHTML = '<option value="">--Select Model--</option>';
      if (!brand) return;
      vehiclesData[brand].forEach(vehicle => {
        const option = document.createElement('option');
        option.value = vehicle.model;
        option.textContent = vehicle.model;
        modelSelect.appendChild(option);
      });
    }

    document.getElementById('calculateBtn').addEventListener('click', () => {
      const brand = document.getElementById('brand').value;
      const model = document.getElementById('model').value;
      const area = document.getElementById('area').value;

      if (!brand || !model || !area) {
        alert('Please select brand, model, and area.');
        return;
      }

      const vehicle = vehiclesData[brand].find(v => v.model === model);
      let costPerMile = 0;
      let fuelType = vehicle.fuel;

      if (fuelType === 'petrol') {
        costPerMile = (fuelPrices[area].petrol / 100) / (vehicle.mpg || 1);
      } else if (fuelType === 'diesel') {
        costPerMile = (fuelPrices[area].diesel / 100) / (vehicle.mpg || 1);
      } else if (fuelType === 'hybrid') {
        const petrolCost = (fuelPrices[area].petrol / 100) / (vehicle.mpg || 1);
        const electricCost = (energyPrices[area] / 100) * (vehicle.kwh_per_mile || 0.3);
        costPerMile = (petrolCost + electricCost) / 2;
      } else if (fuelType === 'electric') {
        costPerMile = (energyPrices[area] / 100) * (vehicle.kwh_per_mile || 0.3);
      }

      document.getElementById('result').innerText =
        `The estimated cost to run ${brand} ${model} in ${area} is £${costPerMile.toFixed(2)} per mile.`;
    });
  </script>
</body>
</html>
